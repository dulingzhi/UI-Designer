# 参考线功能测试清单

## 基础功能测试

### ✅ 1. 参考线创建
- [ ] 从水平标尺拖拽创建水平参考线
- [ ] 从垂直标尺拖拽创建垂直参考线
- [ ] 参考线显示为蓝色细线
- [ ] 多次创建不同位置的参考线

### ✅ 2. 参考线移动
- [ ] 鼠标悬停参考线时光标变化
- [ ] 拖拽水平参考线上下移动
- [ ] 拖拽垂直参考线左右移动
- [ ] 移动时显示位置提示
- [ ] 位置提示显示正确的像素值

### ✅ 3. 参考线删除
- [ ] 双击参考线可以删除
- [ ] 右键点击参考线可以删除
- [ ] 使用Ctrl+;清除所有参考线
- [ ] 菜单"查看 > 清除参考线"功能正常
- [ ] 没有参考线时菜单项显示为禁用

### ✅ 4. 视觉反馈
- [ ] 正常状态：蓝色，60%透明度
- [ ] 悬停状态：蓝色，100%透明度，有发光效果
- [ ] 拖拽状态：蓝色，100%透明度，有发光效果
- [ ] 位置提示背景为黑色半透明
- [ ] 位置提示文字为白色

## 交互测试

### ✅ 5. 吸附功能
- [ ] 拖动UI元素靠近参考线时自动吸附
- [ ] 元素左边缘吸附到垂直参考线
- [ ] 元素右边缘吸附到垂直参考线
- [ ] 元素中心吸附到垂直参考线
- [ ] 元素上边缘吸附到水平参考线
- [ ] 元素下边缘吸附到水平参考线
- [ ] 元素中心吸附到水平参考线
- [ ] 吸附阈值约5像素

### ✅ 6. 画布操作
- [ ] 缩放画布时参考线跟随缩放
- [ ] 平移画布时参考线跟随平移
- [ ] 重置画布时参考线位置正确
- [ ] 参考线不影响画布其他功能

### ✅ 7. 数据持久化
- [ ] 创建参考线后保存项目
- [ ] 重新加载项目，参考线还在
- [ ] 参考线位置保持正确
- [ ] 导出FDF时参考线不包含在内

## 边界情况测试

### ✅ 8. 边界测试
- [ ] 创建位置为0的参考线
- [ ] 创建位置为画布最大值的参考线
- [ ] 拖拽参考线超出画布范围时自动限制
- [ ] 创建大量参考线（10+）性能正常

### ✅ 9. 兼容性测试
- [ ] 加载没有guides字段的旧项目文件
- [ ] 旧项目自动初始化空guides数组
- [ ] 新建项目时guides为空数组
- [ ] 导入项目时guides正确加载

### ✅ 10. 锁定功能（通过代码设置）
```typescript
// 手动测试：在控制台执行
const { addGuide } = useProjectStore.getState();
addGuide({
  id: 'locked-guide',
  orientation: 'vertical',
  position: 300,
  locked: true,
  color: '#888888'
});
```
- [ ] 锁定的参考线显示为灰色
- [ ] 锁定的参考线光标显示为"not-allowed"
- [ ] 锁定的参考线无法拖拽移动
- [ ] 锁定的参考线无法双击删除
- [ ] 锁定的参考线无法右键删除
- [ ] Ctrl+;可以清除锁定的参考线

## 用户体验测试

### ✅ 11. 标尺集成
- [ ] 标尺显示时可以创建参考线
- [ ] 标尺隐藏时无法创建参考线
- [ ] 从标尺拖拽时光标变为"grab"
- [ ] 拖拽过程中光标变为"grabbing"

### ✅ 12. 多参考线测试
- [ ] 同时显示多条水平参考线
- [ ] 同时显示多条垂直参考线
- [ ] 参考线相互不干扰
- [ ] 可以独立操作每条参考线
- [ ] 参考线在画布中正确分层显示

### ✅ 13. 性能测试
- [ ] 创建10条参考线，画布操作流畅
- [ ] 拖拽参考线时无明显卡顿
- [ ] 吸附计算不影响拖拽流畅度

## 回归测试

### ✅ 14. 原有功能不受影响
- [ ] 网格显示正常
- [ ] 锚点显示正常
- [ ] 标尺显示正常
- [ ] Frame拖拽正常
- [ ] Frame调整大小正常
- [ ] Frame选择正常
- [ ] 撤销/重做正常
- [ ] 项目保存/加载正常
- [ ] 代码导出正常

## 测试场景示例

### 场景1: 创建对齐网格
```
步骤:
1. 显示标尺
2. 从左侧标尺在x=100, 200, 300位置创建垂直参考线
3. 从顶部标尺在y=100, 200, 300位置创建水平参考线
4. 拖拽UI元素，验证吸附到网格点

期望: 
- 形成3x3网格
- 元素精确对齐到网格交叉点
```

### 场景2: 多元素左对齐
```
步骤:
1. 创建3个按钮，位置随意
2. 在x=150位置创建垂直参考线
3. 依次拖拽3个按钮的左边缘到参考线附近

期望:
- 所有按钮左边缘精确对齐到x=150
```

### 场景3: 清理参考线
```
步骤:
1. 创建5条参考线
2. 双击删除2条
3. 右键删除1条
4. 按Ctrl+;清除剩余

期望:
- 所有参考线被清除
- 菜单项变为禁用状态
```

## 问题记录

| 问题ID | 严重性 | 描述 | 状态 | 备注 |
|--------|--------|------|------|------|
| - | - | - | - | - |

## 测试总结

- **测试日期**: _________
- **测试人员**: _________
- **通过项**: _____ / _____
- **失败项**: _____
- **阻塞问题**: _____
- **建议改进**: _____

## 签名

测试完成: ____________  日期: ____________
