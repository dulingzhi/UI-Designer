# 🧪 v0.4.0 功能测试指南

## 测试环境准备

```powershell
# 启动开发服务器
npm run tauri dev
```

---

## ✅ 测试清单

### 测试 1：Frame 调整大小 - 基础功能

**步骤：**
1. 点击 `▭ Backdrop` 创建一个背景 Frame
2. 确认 Frame 被选中（红色边框）
3. 观察 Frame 四周出现 8 个红色手柄
4. 将鼠标移到右下角手柄
5. 确认鼠标指针变为 ↘ 形状
6. 按住左键拖拽，向右下方移动
7. 观察 Frame 实时变大
8. 松开鼠标

**预期结果：**
- ✅ 手柄正确显示（8 个方向）
- ✅ 鼠标指针正确变化
- ✅ 拖拽时 Frame 实时调整大小
- ✅ 松开后大小固定
- ✅ 属性面板中 width 和 height 值更新

---

### 测试 2：保持纵横比

**步骤：**
1. 创建一个 Backdrop Frame（默认大小）
2. 按住 **Shift** 键
3. 拖拽右下角手柄
4. 观察 Frame 按比例缩放
5. 松开鼠标

**预期结果：**
- ✅ 按住 Shift 时，宽高比例保持不变
- ✅ 松开 Shift 时，可以自由调整

---

### 测试 3：四边调整

**步骤：**
1. 创建一个 Frame
2. 拖拽右边手柄（只调整宽度）
3. 拖拽上边手柄（只调整高度）
4. 拖拽左边手柄
5. 拖拽下边手柄

**预期结果：**
- ✅ 右边/左边：只改变宽度，高度不变
- ✅ 上边/下边：只改变高度，宽度不变
- ✅ 左边/下边：调整位置和大小（保持右上角不动）

---

### 测试 4：边界限制

**步骤：**
1. 创建一个 Frame
2. 拖拽右下角手柄，尝试拖到屏幕外
3. 观察 Frame 是否超出绿色边框（4:3 安全区）

**预期结果：**
- ✅ Frame 不会超出 0.8 x 0.6 范围
- ✅ 拖拽被自动限制

---

### 测试 5：最小尺寸限制

**步骤：**
1. 创建一个大 Frame
2. 拖拽右下角手柄，向左上缩小
3. 尝试缩小到极小

**预期结果：**
- ✅ Frame 最小宽度：0.01
- ✅ Frame 最小高度：0.01
- ✅ 不会缩小为 0

---

### 测试 6：撤销/重做调整大小

**步骤：**
1. 创建一个 Frame
2. 调整大小（记住原始大小）
3. 点击 `↶ 撤销` 或按 Ctrl+Z
4. 观察 Frame 恢复原始大小
5. 点击 `↷ 重做` 或按 Ctrl+Y
6. 观察 Frame 恢复调整后的大小

**预期结果：**
- ✅ 撤销正确恢复
- ✅ 重做正确应用
- ✅ 可以多次撤销/重做

---

### 测试 7：Ctrl+S 快速保存

**步骤：**
1. 创建一些 Frame
2. 点击 `💾 另存为`，保存为 `test.w3ui`
3. 修改 Frame（移动或调整大小）
4. 按 **Ctrl+S**
5. 关闭应用
6. 重新打开应用
7. 点击 `📂 打开`，选择 `test.w3ui`

**预期结果：**
- ✅ Ctrl+S 保存成功（无对话框）
- ✅ 重新加载后修改已保存

---

### 测试 8：Delete 删除 Frame

**步骤：**
1. 创建 3 个 Frame
2. 选中第 2 个 Frame
3. 按 **Delete** 键
4. 观察该 Frame 消失

**预期结果：**
- ✅ 选中的 Frame 被删除
- ✅ 其他 Frame 不受影响
- ✅ 可以通过 Ctrl+Z 撤销删除

---

### 测试 9：Escape 取消选择

**步骤：**
1. 创建一个 Frame
2. 点击选中（红色边框）
3. 按 **Escape** 键
4. 观察边框变为绿色

**预期结果：**
- ✅ Frame 取消选择
- ✅ 边框变回绿色
- ✅ 属性面板显示"未选中任何 Frame"

---

### 测试 10：输入框中不触发删除

**步骤：**
1. 选中一个 Frame
2. 在属性面板的"名称"输入框中点击
3. 输入一些文字
4. 按 **Backspace** 键删除文字

**预期结果：**
- ✅ 只删除输入框中的文字
- ✅ **不会删除** Frame

---

### 测试 11：多次调整大小性能

**步骤：**
1. 创建 10 个 Frame
2. 依次调整每个 Frame 的大小
3. 观察操作流畅度
4. 检查是否有卡顿

**预期结果：**
- ✅ 操作流畅，无卡顿
- ✅ 帧率保持 60 FPS
- ✅ 内存占用正常

---

### 测试 12：组合操作

**步骤：**
1. 创建一个 Frame
2. 拖拽移动位置
3. 调整大小
4. 修改属性（名称、颜色等）
5. 按 Ctrl+S 保存
6. 多次按 Ctrl+Z 撤销
7. 多次按 Ctrl+Y 重做

**预期结果：**
- ✅ 所有操作都可撤销
- ✅ 操作顺序正确
- ✅ 保存后重新加载数据一致

---

## 🐛 已知问题检查

### 问题 1：手柄被子元素遮挡

**检查：**
1. 创建一个 Frame A
2. 创建一个子 Frame B（父级设为 A）
3. 选中 Frame A
4. 观察手柄是否可见

**预期：**
- ✅ 手柄 z-index 足够高，不被遮挡

---

### 问题 2：快速拖拽手柄时鼠标脱离

**检查：**
1. 快速拖拽右下角手柄
2. 观察是否会失去控制

**预期：**
- ✅ 即使快速拖拽也能正常跟随
- ✅ 鼠标离开 Frame 区域仍然有效

---

### 问题 3：缩放画布后调整大小

**检查：**
1. Alt + 滚轮缩放画布到 200%
2. 调整 Frame 大小
3. 观察坐标是否正确

**预期：**
- ✅ 缩放后调整大小仍然准确
- ✅ 坐标转换正确

---

## 📊 性能测试

### 测试：大量 Frame 调整大小

**步骤：**
1. 创建 50 个 Frame（批量创建功能待实现，先手动创建 10 个）
2. 依次调整每个 Frame 的大小
3. 使用性能监视器观察：
   - CPU 使用率
   - 内存占用
   - 帧率（FPS）

**基准：**
- CPU < 30%
- 内存 < 500 MB
- FPS > 50

---

## ✅ 验收标准

### 必须通过的测试：
- ✅ 测试 1-6（基础调整大小功能）
- ✅ 测试 7-9（快捷键功能）
- ✅ 测试 10（输入框保护）
- ✅ 测试 12（组合操作）

### 建议通过的测试：
- ✅ 测试 11（性能测试）
- ✅ 已知问题 1-3

---

## 📝 测试报告模板

```markdown
## v0.4.0 测试报告

**测试日期：** 2025-10-30  
**测试人：** [你的名字]  
**环境：** Windows 11 / macOS / Linux

### 测试结果

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 测试 1 | ✅ / ❌ | |
| 测试 2 | ✅ / ❌ | |
| ... | ... | ... |

### 发现的问题

1. **问题描述**
   - 严重程度：高/中/低
   - 复现步骤：...
   - 预期行为：...
   - 实际行为：...

### 总体评价

- 功能完整性：[0-100]%
- 稳定性：[0-100]%
- 性能：[0-100]%
- 用户体验：[0-100]%

### 建议

- ...

```

---

## 🎉 测试完成后

如果所有测试通过：
1. ✅ 更新 STATUS.md
2. ✅ 发布 v0.4.0 版本
3. ✅ 开始下一个功能开发

如果发现问题：
1. 📝 记录到 Issues
2. 🐛 修复 Bug
3. 🔄 重新测试

---

**祝测试顺利！** 🚀
